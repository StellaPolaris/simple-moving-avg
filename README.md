# simple-moving-avg [![NPM version](https://img.shields.io/npm/v/simple-moving-avg.svg?style=flat)](https://www.npmjs.com/package/simple-moving-avg) [![NPM downloads](https://img.shields.io/npm/dm/simple-moving-avg.svg?style=flat)](https://npmjs.org/package/simple-moving-avg) [![Linux Build Status](https://img.shields.io/travis/doowb/simple-moving-avg.svg?style=flat&label=Travis)](https://travis-ci.org/doowb/simple-moving-avg) [![Windows Build Status](https://img.shields.io/appveyor/ci/doowb/simple-moving-avg.svg?style=flat&label=AppVeyor)](https://ci.appveyor.com/project/doowb/simple-moving-avg)

> Calculate the simple moving average for an array.

## Install

Install with [npm](https://www.npmjs.com/):

```sh
$ npm install --save simple-moving-avg
```

## Usage

```js
var sma = require('simple-moving-avg');
```

## API

### [sma](index.js#L25)

Calculate the simple moving average of a given array and using a subset of `n` elements. Note that elements that cannot be calculated because of not enough items in the subset will be set to 0

**Example**

```js
var arr = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10];
console.log(sma(arr, 3));
//=> [ 0, 0, 2, 3, 4, 5, 6, 7, 8, 9 ]

// center the mean by passing `true` as the third argument
console.log(sma(arr, 3, true));
//=> [ 0, 2, 3, 4, 5, 6, 7, 8, 9, 0 ]
```

**Params**

* `arr` **{Array}**: Array containing full set of items to calcualte
* `n` **{Number}**: Number of items in each subset to use
* `center` **{Boolean}**: Center around the item in the array. Defaults to `false`. See [center](#center) for more details.
* `returns` **{Array}**: Array containing averaged values

### [center](index.js#L66)

Calculate the simple moving average of a given array and using a subset of `n` elements. The subset is calculated around the current index using `{i - ceil(n/2) .. i + ceil(n/2)}`. This requires that `n` is odd to have a balanced number of items on either side of `i`. Note that elements that cannot be calculated because of not enough items in the subset will be set to 0

**Example**

```js
console.log(sma.center(arr, 3));
//=> [ 0, 2, 3, 4, 5, 6, 7, 8, 9, 0 ]
```

**Params**

* `arr` **{Array}**: Array containing full set of items to calcualte
* `n` **{Number}**: Number of items in each subset to use
* `returns` **{Array}**: Array containing averaged values

### [calc](index.js#L113)

The calculation function used for calculating the next simple moving average in a series of simple moving averages. This is used in the [sma](#sma) and [center](#center) functions after calculating the average of the first subset. This reduces the amount of times that the total array needs to be sliced and also allows for using the calculation function outside of this library when streaming an array of values.

**Example**

```js
var prevAvg = avg([1, 2, 3]); // fake subset array with 3 values
var currentVal = 4; // current value (the value that would be next in the main array)
var firstVal = 1; // first value from the subset used to calculate the previous avg;

// create a calc function that will calculate the next average using a subset size of 3
var calcFn = sma.calc(3);
var currentAvg = calcFn(prevAvg, currentVal, firstVal);
console.log(currentAvg);
//=> 3
```

**Params**

* `n` **{Number}**: Size of the subsets
* `precision` **{Number}**: Number of decimal places to use. Defaults to 0
* `returns` **{Number}**: Average from the calculation.

## About

### Related projects

[array-avg](https://www.npmjs.com/package/array-avg): Calculate the average of an array of numbers. | [homepage](https://github.com/doowb/array-avg "Calculate the average of an array of numbers.")

### Contributing

Pull requests and stars are always welcome. For bugs and feature requests, [please create an issue](../../issues/new).

Please read the [contributing guide](contributing.md) for avice on opening issues, pull requests, and coding standards.

### Building docs

_(This document was generated by [verb-generate-readme](https://github.com/verbose/verb-generate-readme) (a [verb](https://github.com/verbose/verb) generator), please don't edit the readme directly. Any changes to the readme must be made in [.verb.md](.verb.md).)_

To generate the readme and API documentation with [verb](https://github.com/verbose/verb):

```sh
$ npm install -g verb verb-generate-readme && verb
```

### Running tests

Install dev dependencies:

```sh
$ npm install -d && npm test
```

### Author

**Brian Woodward**

* [github/doowb](https://github.com/doowb)
* [twitter/doowb](http://twitter.com/doowb)

### License

Copyright Â© 2016, [Brian Woodward](https://github.com/doowb).
Released under the [MIT license](LICENSE).

***

_This file was generated by [verb-generate-readme](https://github.com/verbose/verb-generate-readme), v0.2.0, on November 02, 2016._